[activeannoservice](../../index.md) / [document](../index.md) / [DocumentDAO](./index.md)

# DocumentDAO

`class DocumentDAO`

This DAO provides all methods to interact with the document collection. It hides the collection and controls
access to it via the public methods.

### Constructors

| Name | Summary |
|---|---|
| [&lt;init&gt;](-init-.md) | `DocumentDAO(database: CoroutineDatabase)`<br>This DAO provides all methods to interact with the document collection. It hides the collection and controls access to it via the public methods. |

### Functions

| Name | Summary |
|---|---|
| [aggregateValuesForConfigAndAnnotation](aggregate-values-for-config-and-annotation.md) | `suspend fun aggregateValuesForConfigAndAnnotation(configurationID: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, annotationID: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`>`<br>Get unique list of values for a configuration and annotation over all existing annotations. |
| [byId](by-id.md) | `suspend fun byId(id: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`Document`](../-document/index.md)`?` |
| [countForAnnotation](count-for-annotation.md) | `suspend fun countForAnnotation(configs: `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`ProjectConfig`](../../config/-project-config/index.md)`>, userIdentifier: `[`UserIdentifier`](../../config/-user-identifier.md)`): `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)<br>Count number of annotations required by the user given its [userIdentifier](count-for-annotation.md#document.DocumentDAO$countForAnnotation(kotlin.collections.List((config.ProjectConfig)), kotlin.String)/userIdentifier) and a list of [configs](count-for-annotation.md#document.DocumentDAO$countForAnnotation(kotlin.collections.List((config.ProjectConfig)), kotlin.String)/configs). |
| [countForCuration](count-for-curation.md) | `suspend fun countForCuration(configs: `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`ProjectConfig`](../../config/-project-config/index.md)`>, userIdentifier: `[`UserIdentifier`](../../config/-user-identifier.md)`): `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)<br>Count number of curations required given a list of [configs](count-for-curation.md#document.DocumentDAO$countForCuration(kotlin.collections.List((config.ProjectConfig)), kotlin.String)/configs) and a [userIdentifier](count-for-curation.md#document.DocumentDAO$countForCuration(kotlin.collections.List((config.ProjectConfig)), kotlin.String)/userIdentifier). |
| [deleteById](delete-by-id.md) | `suspend fun deleteById(id: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): DeleteResult` |
| [findFailedWebHookDocuments](find-failed-web-hook-documents.md) | `suspend fun findFailedWebHookDocuments(configurationID: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Get all documents with failed webhook tries for resend purposes given a [configurationID](find-failed-web-hook-documents.md#document.DocumentDAO$findFailedWebHookDocuments(kotlin.String)/configurationID) |
| [findForAnnotation](find-for-annotation.md) | `suspend fun findForAnnotation(config: `[`ProjectConfig`](../../config/-project-config/index.md)`, userIdentifier: `[`UserIdentifier`](../../config/-user-identifier.md)`, limit: `[`Int`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html)` = 10, ignoreDocuments: `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`> = listOf()): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Encapsulates the query for getting new documents to annotate. Will use the configs filterCondition, will optionally exclude some documents, and only return documents that are required for annotation and not already annotated by the user |
| [findForConfig](find-for-config.md) | `suspend fun findForConfig(config: `[`ProjectConfig`](../../config/-project-config/index.md)`): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Given a [config](find-for-config.md#document.DocumentDAO$findForConfig(config.ProjectConfig)/config), find all documents for that config. |
| [findForCuration](find-for-curation.md) | `suspend fun findForCuration(config: `[`ProjectConfig`](../../config/-project-config/index.md)`, userIdentifier: `[`UserIdentifier`](../../config/-user-identifier.md)`, limit: `[`Int`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html)` = 10, ignoreDocuments: `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`> = listOf()): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Encapsulates the query for getting new documents to curate. Will use the configs filterCondition, will optionally exclude some documents, and only return documents that are required for curation. If a curator is also an annotator, and the curator annotated a document, the curator will not be able to curate the document. |
| [findForExport](find-for-export.md) | `suspend fun findForExport(configurationID: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, includeUnfinished: `[`Boolean`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)`, documentIDs: `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`>, timestamp: `[`Long`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html)`?): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Get all documents for an export for a [configurationID](find-for-export.md#document.DocumentDAO$findForExport(kotlin.String, kotlin.Boolean, kotlin.collections.List((kotlin.String)), kotlin.Long)/configurationID) with options to also include unfinished documents, limit it to a list of [documentIDs](find-for-export.md#document.DocumentDAO$findForExport(kotlin.String, kotlin.Boolean, kotlin.collections.List((kotlin.String)), kotlin.Long)/documentIDs) and/or only return documents newer than a [timestamp](find-for-export.md#document.DocumentDAO$findForExport(kotlin.String, kotlin.Boolean, kotlin.collections.List((kotlin.String)), kotlin.Long)/timestamp). If unfinished documents are included, the annotation timestamp will be used, else the finalizedAnnotation timestamp. |
| [findForRestrictedConfig](find-for-restricted-config.md) | `suspend fun findForRestrictedConfig(configurationID: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Given a [configurationID](find-for-restricted-config.md#document.DocumentDAO$findForRestrictedConfig(kotlin.String)/configurationID), find all documents that are restricted to that config. |
| [findForSearch](find-for-search.md) | `suspend fun findForSearch(config: `[`ProjectConfig`](../../config/-project-config/index.md)`, searchFilter: `[`FilterCondition`](../../config/-filter-condition/index.md)`?): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>`<br>Find documents for a given [config](find-for-search.md#document.DocumentDAO$findForSearch(config.ProjectConfig, config.FilterCondition)/config) and an optional additional searchFilter |
| [getAll](get-all.md) | `suspend fun getAll(): `[`List`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)`<`[`Document`](../-document/index.md)`>` |
| [insert](insert.md) | `suspend fun insert(json: ObjectNode, restrictedConfig: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`? = null): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>Given the originalDocument, create a new document entry into the database. Provide [restrictedConfig](insert.md#document.DocumentDAO$insert(com.fasterxml.jackson.databind.node.ObjectNode, kotlin.String)/restrictedConfig) optionally (only used in one-off project context) |
| [insertMany](insert-many.md) | `suspend fun insertMany(json: ArrayNode, restrictedConfig: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`? = null): `[`Unit`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html)<br>Given an json array of originalDocuments, create new document entries into the database. Provide [restrictedConfig](insert-many.md#document.DocumentDAO$insertMany(com.fasterxml.jackson.databind.node.ArrayNode, kotlin.String)/restrictedConfig) optionally (only used in one-off project context) |
| [update](update.md) | `suspend fun update(id: `[`String`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html)`, document: `[`Document`](../-document/index.md)`): UpdateResult` |
